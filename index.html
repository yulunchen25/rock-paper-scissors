<!DOCTYPE html>
<html>
<head>
  <title>Rock Paper Scissors</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>
    // Simulates the computer's choice, randomly selects rock, paper or scissors
    function computerPlay() {
        let random = Math.floor(Math.random() * 3)
        if (random === 1) {
            return 'rock';
        } else if (random === 2) {
            return 'paper';
        } else {
            return 'scissors';
        }
    }

    // Counts the number of times the player or computer has won
    let playerWin = 0;
    let computerWin = 0;
    
    // Plays a single round of Rock Paper Scissors
    function rockPaperScissors(playerSelection,computerSelection) {
        switch (true) { // Compares all possible cases and returns the winner of the round
            case playerSelection === 'rock' && computerSelection == 'rock':
            case playerSelection === 'paper' && computerSelection == 'paper':
            case playerSelection === 'scissors' && computerSelection == 'scissors':
                return 'Tie!';
                break;
            case playerSelection === 'rock' && computerSelection == 'scissors':
                playerWin += 1;
                return 'You win! Rock beats Scissors!';
                break;
            case playerSelection === 'rock' && computerSelection == 'paper':
                computerWin += 1;
                return 'You lose! Paper beats Rock!';
                break;
            case playerSelection === 'paper' && computerSelection == 'rock':
                playerWin += 1;
                return 'You win! Paper beats Rock!';
                break;
            case playerSelection === 'paper' && computerSelection == 'scissors':
                computerWin += 1;
                return 'You lose! Scissors beats Paper!';
                break;
            case playerSelection === 'scissors' && computerSelection == 'rock':
                computerWin += 1;
                return 'You lose! Rock beats Scissors!';
                break;
            case playerSelection === 'scissors' && computerSelection == 'paper':
                playerWin += 1;
                return 'You win! Scissors beats Paper!';
                break;
        }
    }

    // Ask the user for an input and ensures it is valid
    function getInput(){
        let playerSelection = prompt("Rock, Paper or Scissors?")
        while ((playerSelection === null || playerSelection === '' || playerSelection === undefined) || !(playerSelection.toLowerCase() === 'rock' || playerSelection.toLowerCase() === 'paper' || playerSelection.toLowerCase() === 'scissors')) {
            playerSelection = prompt("Invalid input, Rock, Paper or Scissors?");
        }
        playerSelection = playerSelection.toLowerCase()
        return playerSelection;
    }
    // Plays 5 rounds of Rock Paper Scissors and returns the winner at the end
    function game() {
        let i = 1
        while (i <= 5) {
            console.log(rockPaperScissors(getInput(), computerPlay()))
            i++
        }
        if (playerWin > computerWin) {
            return `Player wins! ${playerWin} vs ${computerWin}`;
        } else if (computerWin > playerWin) {
            return `Computer wins! ${computerWin} vs ${playerWin}`;
        } else {
            return `Tie! ${playerWin} vs ${computerWin}!`;
        }
    }

    console.log(game()) // Plays 5 rounds of Rock Paper Scissors and output the result of each round and the overall winner
  </script>
</body>
</html>